<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
	<title>Game of Life</title>
	<link rel="stylesheet" type="text/css" href="../../css/stylesheet.css" />
	<script src="../../jquery-3.1.1.min.js"></script>
	<script src="texteJSON.json"></script>
	<script src="state-machine.js"></script>
	<script src="VnSm.js"></script>

</head>
<body style="display: none;">
	<div id="main-screen-chapter1">
	<div id ="decision">
	<span id="option1" onclick="Demo.option1();"></span>
	<span id="option2" onclick="Demo.option2();"></span>
		 </div>
		<div id="textBox">
		<p id="personWhoTalk">
		</p>
			<p id="text">
			</p>
		</div>
		<div id="character">
		</div>
		 
	</div>
	<audio autoplay>
  <source src="" type="audio/mpeg">
</audio>
	<script type="text/javascript">
	
		
		counter = -1;

		
		var mydata = $.parseJSON(sprecherText);
		var decisionJson = $.parseJSON(choose1);
		var sceneBackground = $.parseJSON(backgrounds);

		var placeHolderText = 0;
		var placeHolderName = 0;


$(document).ready(function() {
		
 
    $("body").fadeIn(2000,function(){
    	var bg="url(" + sceneBackground[0].image + ")";
    	$("#main-screen-chapter1").css("background-image", bg);
    });

	});



 $('body').click(function () {
 		jQuery('#text').html('');
 		jQuery('#personWhoTalk').html('');
 		jQuery('#character').html('');
        counter = (counter + 1) % mydata.length;
        console.log(counter);


        var imgList= setInterval(function(){
        	var charImg = ""; 
        	charImg += '<li><img src= "' + mydata[counter].image + '"></li>';
        	$('#character').append(charImg);
        	clearInterval(imgList);
        	console.log(mydata[counter].image);
        });
        



var textAdder = setInterval(function(){
    document.getElementById("text").innerHTML += mydata[counter].text.charAt(placeHolderText);
    if (++placeHolderText == mydata[counter].text.length){
        clearInterval(textAdder);
        placeHolderText=0;
    }else{
    	$('body').click(function(){
    		clearInterval(textAdder);
    		placeHolderText=0;
    	});
    }
}, 1);

var nameAdder = setInterval(function(){

    document.getElementById("personWhoTalk").innerHTML += mydata[counter].name.charAt(placeHolderName);
    if (++placeHolderName == mydata[counter].name.length){
        clearInterval(nameAdder);
        placeHolderName=0;
    }else{
    	$('body').click(function(){
    		clearInterval(nameAdder);
    		placeHolderName=0;
    	});
    }
}, 1);
	if (counter==mydata.length-1){
		var op1;
		var op2;
        for (var i = 0; i < decisionJson.length; i++) {
            op1 = $('<tr/>');
            op2 = $('<tr/>');
            op1.append("<td>" + decisionJson[i].option1 + "</td>");
            op2.append("<td>" + decisionJson[i].option2 + "</td>");
            
            $('#option1').append(op1);
            $('#option2').append(op2);

            $('#option1').show();
            $('#option2').show();

        }
	}
});
	</script>
</body>
</html>